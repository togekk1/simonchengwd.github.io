onmessage=async e=>{try{const[s,o,c,l,a]=JSON.parse(e.data),r=indexedDB.open(o);r.onsuccess=e=>{const o=e.target.result,r=o.transaction([c],"readwrite"),n=r.objectStore(c),t=[()=>n.get(l),()=>n.put(a,l),()=>n.count(),()=>n.getAll()][s]();t.onsuccess=function(){var e=t.result;[0,2,3].includes(s)&&postMessage(2===s?e:JSON.stringify(e))},t.onerror=function(e){console.error(e)},r.oncomplete=function(){o.close(),close()},r.onerror=function(e){console.error(e),o.close(),close()}},r.onerror=e=>{console.error(e),close()},r.onupgradeneeded=e=>{e.target.result.createObjectStore(c)}}catch(e){console.error(e)}};