onmessage=async e=>{try{const[c,o,s,a,l]=JSON.parse(e.data),r=indexedDB.open(o);r.onsuccess=e=>{const o=e.target.result,r=o.transaction([s],"readwrite"),t=r.objectStore(s),n=[()=>t.get(a),()=>t.put(l,a),()=>t.count(),()=>t.getAll()][c]();n.onsuccess=function(){var e=n.result;[0,2,3].includes(c)&&postMessage(2===c?e:JSON.stringify(e))},n.onerror=function(e){console.error(e)},r.oncomplete=function(){o.close(),close()},r.onerror=function(e){console.error(e),o.close(),close()}},r.onerror=e=>{console.error(e),close()},r.onupgradeneeded=o=>{["Chapter 1","Timer"].forEach(e=>{o.target.result.createObjectStore(e)})}}catch(e){console.error(e)}};